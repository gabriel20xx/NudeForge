/* NudeForge main stylesheet (migrated). theme.css now linked explicitly in header to avoid FOUC */

/* Override / extend */
:root { --box-max-width: var(--box-max-width, 720px); --font-size-xs:.65rem; --font-size-sm:.75rem; --font-size-base:.9rem; --font-size-md:1rem; --gap-xs:.25rem; --gap-sm:.4rem; --gap-md:.65rem; --gap-lg:1rem; --bar-height:56px; --topbar-height: var(--bar-height); --bottom-nav-height: var(--bar-height); }

/* === Original Styles Start === */
/* Clean Image Comparison Slider Styles */
.comparison-container { position: relative; width: 100%; height: 100%; overflow: hidden; border-radius: 8px; }
.comparison-before, .comparison-after { position: absolute; width: 100%; height: 100%; top: 0; left: 0; }
.comparison-before img, .comparison-after img { width: 100%; height: 100%; object-fit: contain; display: block; }
.comparison-after { overflow: hidden; width: 50%; }
.comparison-slider { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 40px; height: 40px; background: var(--color-accent); border: 3px solid #fff; border-radius: 50%; cursor: ew-resize; z-index: 10; box-shadow: 0 2px 8px rgba(0,0,0,0.3); transition: box-shadow 0.2s ease; }
.comparison-slider:hover { box-shadow: 0 4px 16px rgba(0,0,0,0.4); }
.comparison-slider::before { content: ''; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 2px; height: 20px; background: #fff; }
.comparison-slider::after { content: ''; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 2px; height: 100%; background: var(--color-accent); z-index: -1; }
body { font-family: var(--font-stack); margin:0; padding:0; background: var(--color-bg); color: var(--color-text); text-align:center; min-height:100vh; }
body { padding-bottom: var(--bottom-nav-height); }
/* Toast / notification system */
.toast-root { position:fixed; top:calc(var(--topbar-height) + .75rem); right:.85rem; display:flex; flex-direction:column; gap:.65rem; z-index:120; width: min(340px, calc(100vw - 1.5rem)); pointer-events:none; }
.toast { --_bg: var(--color-surface); --_border: var(--color-border); --_accent: var(--color-accent); display:flex; align-items:flex-start; gap:.75rem; background:var(--_bg); color:var(--color-text); border:1px solid var(--_border); border-left:4px solid var(--_accent); padding:.85rem .95rem .85rem .95rem; border-radius: var(--radius-md); box-shadow: var(--shadow-lg); font-size: var(--font-size-sm); line-height:1.3; position:relative; overflow:hidden; isolation:isolate; pointer-events:auto; animation: toast-in .45s cubic-bezier(.4,0,.2,1); }
.toast.toast-info { --_accent: var(--color-info); }
.toast.toast-success { --_accent: var(--color-success); }
.toast.toast-warn { --_accent: var(--color-warning); }
.toast.toast-error { --_accent: var(--color-danger); }
.toast h4 { margin:0 0 .2rem 0; font-size: var(--font-size-sm); font-weight:600; letter-spacing:.3px; }
.toast .toast-body { flex:1; text-align:left; }
.toast button.toast-close { position:absolute; top:.35rem; right:.35rem; background:none; border:none; color:var(--color-text-dim); cursor:pointer; padding:.35rem; line-height:1; font-size:.85rem; border-radius: var(--radius-sm); }
.toast button.toast-close:hover { color:var(--color-text); background: var(--color-surface-alt); }
.toast-progress { position:absolute; left:0; bottom:0; height:3px; background:var(--_accent); width:100%; transform-origin:left; animation: toast-progress linear forwards; }
@keyframes toast-in { from { opacity:0; transform:translateY(-6px) scale(.97);} to { opacity:1; transform:translateY(0) scale(1);} }
@keyframes toast-out { to { opacity:0; transform:translateY(-6px) scale(.97);} }
@keyframes toast-progress { from { transform:scaleX(1);} to { transform:scaleX(0);} }
@media (max-width:600px){ .toast-root { top:auto; bottom: calc(var(--bottom-nav-height) + .75rem); right:.75rem; left:.75rem; width:auto; } }
/* Unified top bar (align with NudeFlow .app-topbar) */
.app-topbar { position:fixed; top:0; left:0; right:0; height: var(--bar-height); display:grid; grid-template-columns: 1fr auto 1fr; align-items:center; gap:1rem; padding:0 .85rem; background: rgba(13,15,17,0.72); backdrop-filter: blur(18px) saturate(180%); -webkit-backdrop-filter: blur(18px) saturate(180%); border-bottom:1px solid var(--color-border); z-index:50; }
.app-topbar-center { justify-self:center; display:flex; justify-content:center; }
.app-topbar-right { justify-self:end; display:flex; align-items:center; gap: var(--gap-md); }
.app-logo { font-size:1.05rem; font-weight:600; background:var(--gradient-accent); -webkit-background-clip:text; background-clip:text; color:transparent; text-decoration:none; display:inline-flex; align-items:center; justify-self:start; }
h1 { margin:0; font-size:2.2em; letter-spacing:1px; }
.processing-stats { display:flex; flex-direction:column; align-items:flex-start; line-height:1.1; gap: var(--gap-xs); }
.stat-line { font-size: var(--font-size-sm); font-weight:500; color: var(--color-text); }
.header-options { display:none; }
.header-option-label { display:inline-flex; align-items:center; gap:.4rem; color: var(--color-text-dim); font-size: var(--font-size-xs); font-weight:500; cursor:pointer; user-select:none; letter-spacing:.3px; padding:.35rem .55rem; background: var(--color-surface); border:1px solid var(--color-border); border-radius: var(--radius-pill); }
.header-option-checkbox { cursor:pointer; accent-color: var(--color-accent); transform:scale(1.05); }
h2 { color:var(--color-accent-glow); margin:0 0 .7em; font-size:1.3em; letter-spacing:.5px; }
.queue-meta { margin-left:.5em; color:var(--color-text-dim); }
.progress-pct { margin-left:.5em; font-weight:600; }
.processing-progress-wrapper { width:100%; max-width:960px; margin:0.5rem auto 1rem; }
.processing-progress-wrapper[hidden] { display:none !important; }
.processing-progress-track { height:8px; background:var(--color-border); border-radius:4px; overflow:hidden; position:relative; }
.processing-progress-bar { height:100%; width:0%; background:linear-gradient(90deg,var(--color-accent),var(--color-accent-glow)); transition:width .25s ease; }
.processing-progress-bar.complete { animation: progress-flash 1.2s ease forwards; }
@keyframes progress-flash { 0% { filter:brightness(1) saturate(1); } 30% { filter:brightness(1.6) saturate(1.4); } 60% { filter:brightness(1.2) saturate(1.1); } 100% { filter:brightness(1) saturate(1); } }
.processing-progress-label { margin-top:.35rem; font-size:.7rem; text-transform:uppercase; letter-spacing:.08em; color:var(--color-text-dim); text-align:right; }
.carousel-container { width:100%; height:200px; overflow:hidden; margin-top: var(--topbar-height); }
.carousel-slide { display:flex; height:100%; }
.carousel-slide img { height:100%; object-fit:contain; flex-shrink:0; transition:opacity .3s ease; opacity:0; }
.carousel-slide img.loaded { opacity:1; }
.carousel-slide img.loading { opacity:.6; filter:blur(2px); }
.main-container { display:flex; flex-direction:row; justify-content:center; align-items:stretch; gap:2.5rem; padding:1rem; max-width:1400px; margin:0 auto; }
.main-col { width:100%; min-width:280px; display:flex; flex-direction:column; align-items:center; box-sizing:border-box; }
.comparison-container-wrapper { width:100%; display:flex; flex-direction:column; align-items:center; }
.comparison-col { width:100%; margin:0 auto; box-sizing:border-box; display:flex; justify-content:center; }
.settings-container { width:100%; display:flex; flex-direction:column; align-items:center; }
.settings-col { width:100%; margin:0 auto; box-sizing:border-box; display:flex; justify-content:center; }
.main-section { width:100%; max-width:var(--box-max-width); min-width:0; display:flex; flex-direction:column; align-items:center; background:var(--color-panel-bg); border-radius:var(--radius-lg); box-shadow:var(--shadow-lg); padding:1.5rem; box-sizing:border-box; }
.drop-area { cursor:pointer; transition:background .3s, border-color .3s; background:var(--color-dropzone-bg); border:2.5px dashed var(--color-accent-glow); border-radius:12px; }
.drop-area.drag-over { background:var(--color-dropzone-bg); border-color:var(--color-accent); }
.drop-area.disabled { cursor:not-allowed; background-color:#444; opacity:.6; }
.drop-area p { font-size:1.1rem; text-align:center; color:var(--color-accent-glow); letter-spacing:.5px; }
input[type=file]{ display:none; }
.image-box { width:100%; aspect-ratio:1; background:var(--color-dropzone-bg); border:2.5px dashed var(--color-accent-glow); border-radius:12px; position:relative; overflow:hidden; display:flex; flex-direction:column; justify-content:center; align-items:center; padding:1rem; box-sizing:border-box; min-width:0; }
.image-box img { max-width:100%; max-height:100%; width:auto; height:auto; object-fit:contain; display:none; border-radius:8px; background:#181c24; }
#outputImage { display:block; width:100%; height:auto; }
.multi-preview-container { display:grid; grid-template-columns:repeat(auto-fit,minmax(120px,1fr)); gap:10px; width:100%; max-height:300px; overflow-y:auto; padding:10px; background:var(--color-bg-alt); border-radius:8px; margin:10px 0; }
.multi-preview-item { position:relative; aspect-ratio:1; background:var(--color-dropzone-bg); border:2px solid var(--color-accent-glow); border-radius:8px; overflow:hidden; display:flex; align-items:center; justify-content:center; }
.multi-preview-item img { width:100%; height:100%; object-fit:cover; border-radius:6px; display:block; }
.multi-preview-item .file-name { position:absolute; bottom:0; left:0; right:0; background:rgba(0,0,0,.8); color:var(--color-accent-glow); font-size:10px; padding:2px 4px; text-align:center; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
.multi-preview-item .remove-file { position:absolute; top:4px; right:4px; background:var(--color-danger-soft); color:#fff; border:none; border-radius:50%; width:20px; height:20px; cursor:pointer; font-size:12px; display:flex; align-items:center; justify-content:center; z-index:2; }
.multi-preview-item .remove-file:hover { background: var(--color-danger); }
.btn { padding:.7em 1.5em; border:none; border-radius:8px; font-size:1em; margin-top:1em; color:#23272f; cursor:pointer; font-weight:500; letter-spacing:.5px; box-shadow:var(--shadow-sm); transition:background .2s,color .2s,box-shadow .2s; }
.btn:hover { color:#fff; }
.upload-btn { background:var(--gradient-accent); color:#23272f; transition:background .2s,color .2s,box-shadow .2s,opacity .2s; }
.upload-btn:hover:not(:disabled):not(.disabled){ background:var(--gradient-accent-rev); color:#fff; box-shadow:0 4px 16px 0 rgba(255,184,77,0.35); }
.upload-btn:disabled,.upload-btn.disabled { background:#555 !important; color:#888 !important; cursor:not-allowed !important; opacity:.5; box-shadow:none !important; }
.settings-btn { background:var(--gradient-info); }
.settings-btn:hover { background:var(--gradient-info-rev); }
.download-btn { background:var(--gradient-download); }
.download-btn:hover { background:var(--gradient-download-rev); }
.download-btn:disabled { background:var(--color-mid-disabled); color:var(--color-text-disabled); cursor:not-allowed; opacity:.5; }
.download-btn:disabled:hover { background:var(--color-mid-disabled); color:var(--color-text-disabled); box-shadow:none; }
.settings-section { width:100%; min-width:0; display:flex; flex-direction:column; align-items:center; background:var(--color-panel-bg); border-radius:var(--radius-lg); box-shadow:var(--shadow-lg); padding:1.5rem; box-sizing:border-box; margin:0; position:relative; }
.settings-box { width:100%; background:#23272f; border:2.5px dashed #ffb84d; border-radius:12px; position:relative; overflow:visible; display:flex; flex-direction:column; justify-content:flex-start; align-items:stretch; padding:1.5rem; box-sizing:border-box; min-width:0; }
.settings-label { font-weight:600; margin-bottom:.3em; display:block; color:#ffb84d; letter-spacing:.2px; }
.settings-input { width:100%; padding:.5em .7em; border-radius:8px; border:1.5px solid #333; background:#181c24; color:#fff; font-size:1em; margin-bottom:.7em; box-sizing:border-box; transition:border .2s, box-shadow .2s; }
.settings-input:focus { outline:2px solid #ffb84d; border-color:#ffb84d; box-shadow:0 0 0 2px #ffb84d33; }
.settings-row { display:flex; gap:1.5em; margin-bottom:.7em; }
.settings-item { flex:1; display:flex; flex-direction:column; }
.lora-fieldset { border:1.5px solid #555; border-radius:10px; padding:1em 1em .5em; margin-bottom:.7em; background:#181c24; color:#ffb84d; box-shadow:0 1px 8px 0 rgba(0,0,0,0.10); }
.lora-fieldset legend { color:#ffb84d; font-weight:600; font-size:1.08em; letter-spacing:.2px; padding:0 .5em; }
.lora-grid { display:flex; flex-direction:column; gap:.5em; }
.lora-row { display:grid; grid-template-columns:1fr auto; grid-template-rows:auto auto; grid-template-areas:"main controls" "strength controls"; align-items:start; gap:.8em; background:#2a2e35; padding:.6em; border-radius:8px; margin-bottom:.4em; color:#f7f7fa; position:relative; }
.lora-main { grid-area:main; display:flex; flex-direction:row; gap:.8em; align-items:center; }
.lora-model-container { margin-top:0; width:100%; flex:1; }
.lora-row label { font-size:1em; color:#ffb84d; }
.lora-strength-group { grid-area:strength; display:flex; flex-direction:row; align-items:center; gap:.5em; text-align:left; }
.lora-strength { width:60px; background:#181c24; color:#fff; border:1.5px solid #555; border-radius:6px; padding:.2em .4em; font-size:1em; transition:border .2s, box-shadow .2s; }
.lora-strength:focus { outline:2px solid #ffb84d; border-color:#ffb84d; box-shadow:0 0 0 2px #ffb84d33; }
.lora-model-select { width:100%; background:#181c24; color:#fff; border:1.5px solid #555; border-radius:6px; padding:.4em .6em; font-size:.95em; transition:border .2s, box-shadow .2s; cursor:pointer; }
.lora-model-select:focus { outline:2px solid #ffb84d; border-color:#ffb84d; box-shadow:0 0 0 2px #ffb84d33; }
.lora-model-select option { background:#181c24; color:#fff; padding:.4em; }
.lora-controls { text-align:center; }
.lora-row-controls { grid-area:controls; display:flex; align-items:flex-start; justify-content:center; margin-left:0; }
.lora-add-btn { background:#28a745; color:#fff; border:none; padding:.5em 1em; border-radius:6px; cursor:pointer; font-size:.9em; transition:background-color .2s; }
.lora-add-btn:hover { background:#218838; }
.lora-remove-btn { background:#dc3545; color:#fff; border:none; padding:.3em .6em; border-radius:4px; cursor:pointer; font-size:.8em; transition:background-color .2s; }
.lora-remove-btn:hover { background:#c82333; }
.lora-remove-btn:disabled { background:#6c757d; cursor:not-allowed; opacity:.6; }
@media (max-width:1100px){ .main-container{ gap:1.5rem; padding:2rem 1rem;} .comparison-section.main-section{margin:0 auto; max-width:600px;} .settings-section{margin:0 auto; width:100%; max-width:600px;} .main-section{width:100%; min-width:0; margin-bottom:0;} .image-box{max-width:100%;}}
@media (max-width:600px){ :root{ --box-max-width:calc(100vw - 2rem);} .main-container{flex-direction:column; gap:1.5rem; padding:1rem;} .main-col{width:100%;} .comparison-section.main-section{max-width:100%; margin:0 auto;} .main-section{width:100%; margin-bottom:0;} .settings-section{margin:0 auto; max-width:100%; width:100%; padding:1.5rem;} .settings-box{max-width:100%; padding:1.5rem;} .image-box{max-width:100%;}}
/* === Original Styles End === */

/* Bottom navigation tabs (aligned with NudeFlow) */
.bottom-nav { position:fixed; bottom:0; left:0; right:0; height: var(--bottom-nav-height); background: rgba(13,15,17,0.82); backdrop-filter: blur(18px) saturate(180%); -webkit-backdrop-filter: blur(18px) saturate(180%); border-top:1px solid var(--color-border); z-index:60; display:flex; }
.bottom-nav ul { list-style:none; margin:0; padding:0; display:flex; width:100%; justify-content:space-around; align-items:center; }
.bottom-nav a { display:flex; flex-direction:column; align-items:center; justify-content:center; gap:.25rem; font-size: var(--font-size-xs); color: var(--color-text-dim); text-decoration:none; position:relative; height:100%; padding:.2rem .4rem; letter-spacing:.3px; transition: color .25s; }
.bottom-nav a i { font-size:1.05rem; }
.bottom-nav a.active, .bottom-nav a:hover { color: var(--color-accent); }
.bottom-nav a.active::after { content:""; position:absolute; bottom:.15rem; left:50%; transform:translateX(-50%); width:18px; height:3px; background: var(--gradient-accent); border-radius:2px; }

:root[data-theme='light'] .bottom-nav { background:#ffffff; backdrop-filter:none; -webkit-backdrop-filter:none; }
/* Light theme solid white header (match NudeFlow) */
:root[data-theme='light'] .app-topbar { background:#ffffff; backdrop-filter:none; -webkit-backdrop-filter:none; }
/* Light theme overrides for settings & panels (ensure white backgrounds) */
:root[data-theme='light'] .main-section.settings-section { background:#ffffff; }
:root[data-theme='light'] .main-section.upload-section { background:#ffffff; }
:root[data-theme='light'] .main-section.output-section { background:#ffffff; }
:root[data-theme='light'] .settings-box { background:#f7f9fb; border:2.5px dashed var(--color-accent-glow); }
:root[data-theme='light'] .drop-area, 
:root[data-theme='light'] .image-box { background: var(--color-dropzone-bg,#f2f5f8); border-color: var(--color-accent-glow); }
:root[data-theme='light'] .image-box img { background:#ffffff; }
:root { color-scheme: light dark; }
/* Suppress costly transitions during theme flip to avoid perceptible delay in image box repaint */
:root.theme-switching *, :root.theme-switching *::before, :root.theme-switching *::after { transition: none !important; }
:root[data-theme='light'] .lora-fieldset { background:#ffffff; border-color:#c7d0db; color: var(--color-accent-glow); }
:root[data-theme='light'] .lora-row { background:#f2f5f8; color:#1b232b; }
/* CAPTCHA styles removed */
:root[data-theme='light'] .settings-input,
:root[data-theme='light'] .lora-strength,
:root[data-theme='light'] .lora-model-select { background:#f2f5f8; border-color:#c7d0db; color:#1b232b; }
:root[data-theme='light'] .lora-model-select option { background:#ffffff; color:#1b232b; }
