<nav class="bottom-nav" role="navigation" aria-label="Primary">
  <ul>
    <li><a href="/" class="<%= (active==='generator') ? 'active' : '' %>"><i class="fas fa-wand-magic-sparkles" aria-hidden="true"></i><span>Generator</span></a></li>
    <li><a href="/library" class="<%= (active==='library') ? 'active' : '' %>"><i class="fas fa-images" aria-hidden="true"></i><span>Library</span></a></li>
    <li><a href="/profile" class="<%= (active==='profile') ? 'active' : '' %>"><i class="fas fa-user" aria-hidden="true"></i><span>Profile</span></a></li>
  </ul>
</nav>
<script>
// Theme toggle wiring (moved from footer)
(function(){
  const storageKey='app-theme-preference';
  const root=document.documentElement; const mqDark=matchMedia('(prefers-color-scheme: dark)');
  function apply(t){ if(!t) return; root.classList.add('theme-switching'); root.setAttribute('data-theme', t); const btn=document.getElementById('themeToggleBtn'); if(btn) btn.textContent = t==='dark'?'🌙':'☀️'; requestAnimationFrame(()=>{ root.classList.remove('theme-switching'); }); }
  function toggle(){ const cur=root.getAttribute('data-theme')||'dark'; const next=cur==='dark'?'light':'dark'; try{localStorage.setItem(storageKey,next);}catch(e){} apply(next);}  
  document.addEventListener('DOMContentLoaded',()=>{ apply(root.getAttribute('data-theme')); const btn=document.getElementById('themeToggleBtn'); if(btn) btn.addEventListener('click',toggle); });
  mqDark.addEventListener('change',e=>{ if(!localStorage.getItem(storageKey)) apply(e.matches?'dark':'light'); });
  window.addEventListener('storage',e=>{ if(e.key===storageKey) apply(e.newValue); });
})();
</script>
<script src="/js/logger.js"></script>
<script src="/js/main.js"></script>
<script>
// Lightweight toast notification utility (exposed as window.toast)
(function(){
  const rootId='toast-root';
  function ensureRoot(){ let el=document.getElementById(rootId); if(!el){ el=document.createElement('div'); el.id=rootId; el.className='toast-root'; document.body.appendChild(el);} return el; }
  function create(type, message, opts={}){ const root=ensureRoot(); const id='t_'+Date.now()+Math.random().toString(16).slice(2); const ttl = opts.duration ?? 4800; const title = opts.title || ({info:'Info', success:'Success', warn:'Warning', error:'Error'}[type] || 'Notice'); const el=document.createElement('div'); el.className=`toast toast-${type}`; el.setAttribute('role','status'); el.setAttribute('aria-live','polite'); el.innerHTML=`<div class="toast-body"><h4>${title}</h4><div class="toast-msg">${message}</div></div><button class="toast-close" aria-label="Dismiss">✕</button><div class="toast-progress" style="animation-duration:${ttl}ms"></div>`; const closeBtn=el.querySelector('.toast-close'); let closed=false; function remove(){ if(closed) return; closed=true; el.style.animation='toast-out .35s forwards'; setTimeout(()=>{ el.remove(); if(root.childElementCount===0) root.style.display=''; }, 340);} closeBtn.addEventListener('click', remove); if(ttl>0){ setTimeout(remove, ttl); }
    root.appendChild(el); return { id, remove }; }
  const api={ info:(m,o)=>create('info',m,o), success:(m,o)=>create('success',m,o), warn:(m,o)=>create('warn',m,o), error:(m,o)=>create('error',m,o) };
  window.toast=api;
})();
</script>
<!-- closing tags provided by header include -->
